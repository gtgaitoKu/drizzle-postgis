'use strict';

var a=Symbol.for("drizzle:entityKind");function p(r,e){if(!r||typeof r!="object")return !1;if(r instanceof e)return !0;if(!Object.prototype.hasOwnProperty.call(e,a))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let t=Object.getPrototypeOf(r).constructor;if(t)for(;t;){if(a in t&&t[a]===e[a])return !0;t=Object.getPrototypeOf(t);}return !1}var S=class{constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity;}static[a]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}};var x=Symbol.for("drizzle:Name");var re=Symbol.for("drizzle:isPgEnum");function ne(r){return !!r&&typeof r=="function"&&re in r&&r[re]===!0}var A=class{static[a]="Subquery";constructor(e,t,n,o=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:n,isWith:o};}};var se={startActiveSpan(r,e){return e()}};var N=Symbol.for("drizzle:ViewBaseConfig");var J=Symbol.for("drizzle:Schema"),ae=Symbol.for("drizzle:Columns"),ue=Symbol.for("drizzle:ExtraConfigColumns"),G=Symbol.for("drizzle:OriginalName"),M=Symbol.for("drizzle:BaseName"),P=Symbol.for("drizzle:IsAlias"),le=Symbol.for("drizzle:ExtraConfigBuilder"),he=Symbol.for("drizzle:IsDrizzleTable"),w=class{static[a]="Table";static Symbol={Name:x,Schema:J,OriginalName:G,Columns:ae,ExtraConfigColumns:ue,BaseName:M,IsAlias:P,ExtraConfigBuilder:le};[x];[G];[J];[ae];[ue];[M];[P]=!1;[he]=!0;[le]=void 0;constructor(e,t,n){this[x]=this[G]=e,this[J]=t,this[M]=n;}};function H(r){return r!=null&&typeof r.getSQL=="function"}function ye(r){let e={sql:"",params:[]};for(let t of r)e.sql+=t.sql,e.params.push(...t.params),t.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...t.typings));return e}var $=class{static[a]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e];}getSQL(){return new d([this])}},d=class r{constructor(e){this.queryChunks=e;}static[a]="SQL";decoder=fe;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return se.startActiveSpan("drizzle.buildSQL",t=>{let n=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,t){let n=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:o,escapeName:s,escapeParam:h,prepareTyping:g,inlineParams:m,paramStartIndex:b}=n;return ye(e.map(i=>{if(p(i,$))return {sql:i.value.join(""),params:[]};if(p(i,q))return {sql:s(i.value),params:[]};if(i===void 0)return {sql:"",params:[]};if(Array.isArray(i)){let l=[new $("(")];for(let[y,de]of i.entries())l.push(de),y<i.length-1&&l.push(new $(", "));return l.push(new $(")")),this.buildQueryFromSourceParams(l,n)}if(p(i,r))return this.buildQueryFromSourceParams(i.queryChunks,{...n,inlineParams:m||i.shouldInlineParams});if(p(i,w)){let l=i[w.Symbol.Schema],y=i[w.Symbol.Name];return {sql:l===void 0||i[P]?s(y):s(l)+"."+s(y),params:[]}}if(p(i,S)){let l=o.getColumnCasing(i);if(t.invokeSource==="indexes")return {sql:s(l),params:[]};let y=i.table[w.Symbol.Schema];return {sql:i.table[P]||y===void 0?s(i.table[w.Symbol.Name])+"."+s(l):s(y)+"."+s(i.table[w.Symbol.Name])+"."+s(l),params:[]}}if(p(i,T)){let l=i[N].schema,y=i[N].name;return {sql:l===void 0||i[N].isAlias?s(y):s(l)+"."+s(y),params:[]}}if(p(i,O)){if(p(i.value,C))return {sql:h(b.value++,i),params:[i],typings:["none"]};let l=i.value===null?null:i.encoder.mapToDriverValue(i.value);if(p(l,r))return this.buildQueryFromSourceParams([l],n);if(m)return {sql:this.mapInlineParam(l,n),params:[]};let y=["none"];return g&&(y=[g(i.encoder)]),{sql:h(b.value++,l),params:[l],typings:y}}return p(i,C)?{sql:h(b.value++,i),params:[i],typings:["none"]}:p(i,r.Aliased)&&i.fieldAlias!==void 0?{sql:s(i.fieldAlias),params:[]}:p(i,A)?i._.isWith?{sql:s(i._.alias),params:[]}:this.buildQueryFromSourceParams([new $("("),i._.sql,new $(") "),new q(i._.alias)],n):ne(i)?i.schema?{sql:s(i.schema)+"."+s(i.enumName),params:[]}:{sql:s(i.enumName),params:[]}:H(i)?i.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([i.getSQL()],n):this.buildQueryFromSourceParams([new $("("),i.getSQL(),new $(")")],n):m?{sql:this.mapInlineParam(i,n),params:[]}:{sql:h(b.value++,i),params:[i],typings:["none"]}}))}mapInlineParam(e,{escapeString:t}){if(e===null)return "null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return t(e);if(typeof e=="object"){let n=e.toString();return t(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new r.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}},q=class{constructor(e){this.value=e;}static[a]="Name";brand;getSQL(){return new d([this])}};function pe(r){return typeof r=="object"&&r!==null&&"mapToDriverValue"in r&&typeof r.mapToDriverValue=="function"}var fe={mapFromDriverValue:r=>r},ce={mapToDriverValue:r=>r};({...fe,...ce});var O=class{constructor(e,t=ce){this.value=e,this.encoder=t;}static[a]="Param";brand;getSQL(){return new d([this])}};function u(r,...e){let t=[];(e.length>0||r.length>0&&r[0]!=="")&&t.push(new $(r[0]));for(let[n,o]of e.entries())t.push(o,new $(r[n+1]));return new d(t)}(r=>{function e(){return new d([])}r.empty=e;function t(m){return new d(m)}r.fromList=t;function n(m){return new d([new $(m)])}r.raw=n;function o(m,b){let i=[];for(let[l,y]of m.entries())l>0&&b!==void 0&&i.push(b),i.push(y);return new d(i)}r.join=o;function s(m){return new q(m)}r.identifier=s;function h(m){return new C(m)}r.placeholder=h;function g(m,b){return new O(m,b)}r.param=g;})(u||(u={}));(r=>{class e{constructor(n,o){this.sql=n,this.fieldAlias=o;}static[a]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}r.Aliased=e;})(d||(d={}));var C=class{constructor(e){this.name=e;}static[a]="Placeholder";getSQL(){return new d([this])}};var ge=Symbol.for("drizzle:IsDrizzleView"),T=class{static[a]="View";[N];[ge]=!0;constructor({name:e,schema:t,selectedFields:n,query:o}){this[N]={name:e,originalName:e,schema:t,selectedFields:n,query:o,isExisting:!o,isAlias:!1};}getSQL(){return new d([this])}};S.prototype.getSQL=function(){return new d([this])};w.prototype.getSQL=function(){return new d([this])};A.prototype.getSQL=function(){return new d([this])};function f(r,e){return pe(e)&&!H(r)&&!p(r,O)&&!p(r,C)&&!p(r,S)&&!p(r,w)&&!p(r,T)?new O(r,e):r}var c=u.raw("");var $r=(r,e)=>u`${r} OPERATOR(${c}&&) ${f(e,r)}`,br=(r,e)=>u`${r} OPERATOR(${c}&&&) ${f(e,r)}`,wr=(r,e)=>u`${r} OPERATOR(${c}&<) ${f(e,r)}`,Sr=(r,e)=>u`${r} OPERATOR(${c}&<|) ${f(e,r)}`,xr=(r,e)=>u`${r} OPERATOR(${c}&>) ${f(e,r)}`,Or=(r,e)=>u`${r} OPERATOR(${c}<<) ${f(e,r)}`,Cr=(r,e)=>u`${r} OPERATOR(${c}<<|) ${f(e,r)}`,Qr=(r,e)=>u`${r} OPERATOR(${c}|&>) ${f(e,r)}`,Ar=(r,e)=>u`${r} OPERATOR(${c}|>>) ${f(e,r)}`,Nr=(r,e)=>u`${r} OPERATOR(${c}>>) ${f(e,r)}`,Lr=(r,e)=>u`${r} OPERATOR(${c}=) ${f(e,r)}`,Pr=(r,e)=>u`${r} OPERATOR(${c}~=) ${f(e,r)}`,qr=(r,e)=>u`${r} OPERATOR(${c}@) ${f(e,r)}`,Tr=(r,e)=>u`${r} OPERATOR(${c}~) ${f(e,r)}`,zr=(r,e)=>u`${r} OPERATOR(${c}<->) ${f(e,r)}`,Dr=(r,e)=>u`${r} OPERATOR(${c}|=|) ${f(e,r)}`,Er=(r,e)=>u`${r} OPERATOR(${c}<#>) ${f(e,r)}`,vr=(r,e)=>u`${r} OPERATOR(${c}<<->>) ${f(e,r)}`,Rr=(r,e)=>u`${r} OPERATOR(${c}<<#>>) ${f(e,r)}`;

exports.bboxAbove = Ar;
exports.bboxBelow = Cr;
exports.bboxContain = Tr;
exports.bboxContained = qr;
exports.bboxLeft = Or;
exports.bboxOverlaps = $r;
exports.bboxOverlapsND = br;
exports.bboxOverlapsOrAbove = Qr;
exports.bboxOverlapsOrBelow = Sr;
exports.bboxOverlapsOrLeft = wr;
exports.bboxOverlapsOrRight = xr;
exports.bboxRight = Nr;
exports.bboxSame = Pr;
exports.distanceBox = Er;
exports.distanceBoxND = Rr;
exports.distanceCPA = Dr;
exports.distanceCentroidND = vr;
exports.distanceKNN = zr;
exports.eq = Lr;
//# sourceMappingURL=out.js.map
//# sourceMappingURL=operators.js.map