var fe=Object.defineProperty;var ye=(r,e)=>{for(var t in e)fe(r,t,{get:e[t],enumerable:!0});};var a=Symbol.for("drizzle:entityKind");function p(r,e){if(!r||typeof r!="object")return !1;if(r instanceof e)return !0;if(!Object.prototype.hasOwnProperty.call(e,a))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let t=Object.getPrototypeOf(r).constructor;if(t)for(;t;){if(a in t&&t[a]===e[a])return !0;t=Object.getPrototypeOf(t);}return !1}var x=class{static[a]="ColumnBuilder";config;constructor(e,t,n){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:n,generated:void 0};}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e);}};var w=class{constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity;}static[a]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}};var b=Symbol.for("drizzle:Name");var P=class{static[a]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,t){this.reference=()=>{let{name:n,columns:s,foreignColumns:o}=e();return {name:n,columns:s,foreignTable:o[0].table,foreignColumns:o}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete);}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new Q(e,this)}},Q=class{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete;}static[a]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:n}=this.reference(),s=t.map(d=>d.name),o=n.map(d=>d.name),f=[this.table[b],...s,n[0].table[b],...o];return e??`${f.join("_")}_fk`}};function A(r,...e){return r(...e)}function U(r,e){return `${r[b]}_${e.join("_")}_unique`}function M(r,e,t){for(let n=e;n<r.length;n++){let s=r[n];if(s==="\\"){n++;continue}if(s==='"')return [r.slice(e,n).replace(/\\/g,""),n+1];if(!t&&(s===","||s==="}"))return [r.slice(e,n).replace(/\\/g,""),n]}return [r.slice(e).replace(/\\/g,""),r.length]}function G(r,e=0){let t=[],n=e,s=!1;for(;n<r.length;){let o=r[n];if(o===","){(s||n===e)&&t.push(""),s=!0,n++;continue}if(s=!1,o==="\\"){n+=2;continue}if(o==='"'){let[l,h]=M(r,n+1,!0);t.push(l),n=h;continue}if(o==="}")return [t,n+1];if(o==="{"){let[l,h]=G(r,n+1);t.push(l),n=h;continue}let[f,d]=M(r,n,!1);t.push(f),n=d;}return [t,n]}function H(r){let[e]=G(r,1);return e}function I(r){return `{${r.map(e=>Array.isArray(e)?I(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var q=class extends x{foreignKeyConfigs=[];static[a]="PgColumnBuilder";array(e){return new L(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:n,actions:s})=>A((o,f)=>{let d=new P(()=>{let l=o();return {columns:[e],foreignColumns:[l]}});return f.onUpdate&&d.onUpdate(f.onUpdate),f.onDelete&&d.onDelete(f.onDelete),d.build(t)},n,s))}buildExtraConfigColumn(e){return new K(e,this.config)}},N=class extends w{constructor(e,t){t.uniqueName||(t.uniqueName=U(e,[t.name])),super(e,t),this.table=e;}static[a]="PgColumn"},K=class extends N{static[a]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}},L=class extends q{static[a]="PgArrayBuilder";constructor(e,t,n){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=n;}build(e){let t=this.config.baseBuilder.build(e);return new E(e,this.config,t)}},E=class r extends N{constructor(e,t,n,s){super(e,t),this.baseColumn=n,this.range=s,this.size=t.size;}size;static[a]="PgArray";getSQLType(){return `${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=H(e)),e.map(t=>this.baseColumn.mapFromDriverValue(t))}mapToDriverValue(e,t=!1){let n=e.map(s=>s===null?null:p(this.baseColumn,r)?this.baseColumn.mapToDriverValue(s,!0):this.baseColumn.mapToDriverValue(s));return t?n:I(n)}};var Y=Symbol.for("drizzle:isPgEnum");function k(r){return !!r&&typeof r=="function"&&Y in r&&r[Y]===!0}var C=class{static[a]="Subquery";constructor(e,t,n,s=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:n,isWith:s};}};var re={startActiveSpan(r,e){return e()}};var S=Symbol.for("drizzle:ViewBaseConfig");var B=Symbol.for("drizzle:Schema"),ne=Symbol.for("drizzle:Columns"),ie=Symbol.for("drizzle:ExtraConfigColumns"),_=Symbol.for("drizzle:OriginalName"),W=Symbol.for("drizzle:BaseName"),z=Symbol.for("drizzle:IsAlias"),se=Symbol.for("drizzle:ExtraConfigBuilder"),ce=Symbol.for("drizzle:IsDrizzleTable"),g=class{static[a]="Table";static Symbol={Name:b,Schema:B,OriginalName:_,Columns:ne,ExtraConfigColumns:ie,BaseName:W,IsAlias:z,ExtraConfigBuilder:se};[b];[_];[B];[ne];[ie];[W];[z]=!1;[ce]=!0;[se]=void 0;constructor(e,t,n){this[b]=this[_]=e,this[B]=t,this[W]=n;}};function pe(r){return r!=null&&typeof r.getSQL=="function"}function de(r){let e={sql:"",params:[]};for(let t of r)e.sql+=t.sql,e.params.push(...t.params),t.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...t.typings));return e}var y=class{static[a]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e];}getSQL(){return new m([this])}},m=class r{constructor(e){this.queryChunks=e;}static[a]="SQL";decoder=ue;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return re.startActiveSpan("drizzle.buildSQL",t=>{let n=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,t){let n=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:s,escapeName:o,escapeParam:f,prepareTyping:d,inlineParams:l,paramStartIndex:h}=n;return de(e.map(i=>{if(p(i,y))return {sql:i.value.join(""),params:[]};if(p(i,v))return {sql:o(i.value),params:[]};if(i===void 0)return {sql:"",params:[]};if(Array.isArray(i)){let u=[new y("(")];for(let[c,me]of i.entries())u.push(me),c<i.length-1&&u.push(new y(", "));return u.push(new y(")")),this.buildQueryFromSourceParams(u,n)}if(p(i,r))return this.buildQueryFromSourceParams(i.queryChunks,{...n,inlineParams:l||i.shouldInlineParams});if(p(i,g)){let u=i[g.Symbol.Schema],c=i[g.Symbol.Name];return {sql:u===void 0||i[z]?o(c):o(u)+"."+o(c),params:[]}}if(p(i,w)){let u=s.getColumnCasing(i);if(t.invokeSource==="indexes")return {sql:o(u),params:[]};let c=i.table[g.Symbol.Schema];return {sql:i.table[z]||c===void 0?o(i.table[g.Symbol.Name])+"."+o(u):o(c)+"."+o(i.table[g.Symbol.Name])+"."+o(u),params:[]}}if(p(i,R)){let u=i[S].schema,c=i[S].name;return {sql:u===void 0||i[S].isAlias?o(c):o(u)+"."+o(c),params:[]}}if(p(i,T)){if(p(i.value,D))return {sql:f(h.value++,i),params:[i],typings:["none"]};let u=i.value===null?null:i.encoder.mapToDriverValue(i.value);if(p(u,r))return this.buildQueryFromSourceParams([u],n);if(l)return {sql:this.mapInlineParam(u,n),params:[]};let c=["none"];return d&&(c=[d(i.encoder)]),{sql:f(h.value++,u),params:[u],typings:c}}return p(i,D)?{sql:f(h.value++,i),params:[i],typings:["none"]}:p(i,r.Aliased)&&i.fieldAlias!==void 0?{sql:o(i.fieldAlias),params:[]}:p(i,C)?i._.isWith?{sql:o(i._.alias),params:[]}:this.buildQueryFromSourceParams([new y("("),i._.sql,new y(") "),new v(i._.alias)],n):k(i)?i.schema?{sql:o(i.schema)+"."+o(i.enumName),params:[]}:{sql:o(i.enumName),params:[]}:pe(i)?i.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([i.getSQL()],n):this.buildQueryFromSourceParams([new y("("),i.getSQL(),new y(")")],n):l?{sql:this.mapInlineParam(i,n),params:[]}:{sql:f(h.value++,i),params:[i],typings:["none"]}}))}mapInlineParam(e,{escapeString:t}){if(e===null)return "null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return t(e);if(typeof e=="object"){let n=e.toString();return t(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new r.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}},v=class{constructor(e){this.value=e;}static[a]="Name";brand;getSQL(){return new m([this])}};function at(r){return typeof r=="object"&&r!==null&&"mapToDriverValue"in r&&typeof r.mapToDriverValue=="function"}var ue={mapFromDriverValue:r=>r},le={mapToDriverValue:r=>r};({...ue,...le});var T=class{constructor(e,t=le){this.value=e,this.encoder=t;}static[a]="Param";brand;getSQL(){return new m([this])}};function ae(r,...e){let t=[];(e.length>0||r.length>0&&r[0]!=="")&&t.push(new y(r[0]));for(let[n,s]of e.entries())t.push(s,new y(r[n+1]));return new m(t)}(r=>{function e(){return new m([])}r.empty=e;function t(l){return new m(l)}r.fromList=t;function n(l){return new m([new y(l)])}r.raw=n;function s(l,h){let i=[];for(let[u,c]of l.entries())u>0&&h!==void 0&&i.push(h),i.push(c);return new m(i)}r.join=s;function o(l){return new v(l)}r.identifier=o;function f(l){return new D(l)}r.placeholder=f;function d(l,h){return new T(l,h)}r.param=d;})(ae||(ae={}));(r=>{class e{constructor(n,s){this.sql=n,this.fieldAlias=s;}static[a]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}r.Aliased=e;})(m||(m={}));var D=class{constructor(e){this.name=e;}static[a]="Placeholder";getSQL(){return new m([this])}};var he=Symbol.for("drizzle:IsDrizzleView"),R=class{static[a]="View";[S];[he]=!0;constructor({name:e,schema:t,selectedFields:n,query:s}){this[S]={name:e,originalName:e,schema:t,selectedFields:n,query:s,isExisting:!s,isAlias:!1};}getSQL(){return new m([this])}};w.prototype.getSQL=function(){return new m([this])};g.prototype.getSQL=function(){return new m([this])};C.prototype.getSQL=function(){return new m([this])};

export { ye as a, a as b, p as c, w as d, q as e, N as f, g, pe as h, at as i, T as j, ae as k, D as l, R as m };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=chunk-PUN3HLEN.mjs.map